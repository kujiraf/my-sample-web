# frontend

## フロントエンドのALB
CloudFrontとAPIGatewayの間にALBを挟む。NWレイヤの遅延がデメリットではあるが、以下のメリットがあるため採用する。

  - ロードバランシング：ALBがAPI Gatewayへのリクエストを負荷分散し、スケーラビリティと可用性を向上させます。

  - プロトコル変換：API GatewayはRESTfulなAPIに特化したツールであり、ALBはHTTP / HTTPSに特化しています。ALBがプロトコル変換を行うことで、API Gatewayが処理できないプロトコルを処理できるようになります。

  - セキュリティ：ALBがSSL/TLSオフロードを担当することで、API Gatewayの負荷を軽減し、パフォーマンスを向上させます。また、ALBはWAF（Web Application Firewall）をサポートしており、セキュリティ上のリスクを軽減することができます。

  - コスト：API Gatewayはリクエスト数に応じて課金されるため、大量のリクエストを処理する場合にコストが高くなることがあります。ALBを使用することで、API Gatewayが処理するリクエスト数を減らし、コストを削減することができます。

## Froontendのホスティング戦略

S3 + CloudFront VS EC2で比較し、コスト観点で前者とした。

### S3 + CloudFront
- メリット

  -  コストが低い: S3とCloudFrontの組み合わせは、EC2インスタンスを使用するよりもコストが低い場合があります。
  - スケーラビリティが高い: S3は、大量のリクエストに対応するためのスケーラビリティが高いため、ユーザーが急増してもアプリケーションのパフォーマンスに影響が出ることはありません。
  - 簡単な管理: S3は、EC2インスタンスを使用する場合よりも簡単に管理できます。特に、サーバーを管理する必要がないため、開発者はアプリケーションの開発に集中できます。

- デメリット

  - サーバーサイドレンダリングが制限される: S3は、サーバーサイドの処理を行うことができないため、サーバーサイドレンダリングに関する制限があります。
  - ビジネスロジックがAWS以外の場所にある可能性がある: SPAには、バックエンドとのやり取りが必要な場合があります。この場合、バックエンドがAWS外部にある場合、API GatewayやLambdaなどのAWSサービスを使用して、バックエンドとの通信を設定する必要があります。

### EC2
- メリット

  - サーバーサイドレンダリングに制限がない: EC2では、必要に応じてサーバーサイドレンダリングを使用できます。
  - AWS外のリソースにアクセスできる: EC2は、AWS以外のリソースにアクセスすることができるため、バックエンドがAWS外部にある場合に使用できます。

- デメリット

  - コストが高い: EC2を使用する場合、インフラストラクチャーのセットアップと管理が必要であり、コストが高くなる場合があります。
  - スケーラビリティが低い: EC2は、大量のリクエストに対応するためのスケーラビリティが低く、負荷分散のために別のEC2インスタンスを起動する必要がある場合があります。
  - 管理が複雑: EC2は、S3よりも複雑で、セキュリティの考慮事項も多くあります。

### 一般論
- 一般的にはS3とCloudFrontを使用することで、低コストかつ高いパフォーマンスを実現できるため、多くのプロジェクトでこの方法が採用されています。
- EC2を使用する場合には、管理や運用にかかるコストや負荷が高くなる傾向があるため、大規模なプロジェクトや特殊な要件がない限り、あまり採用されないことがあります。
  - ただし、EC2を使用する場合でも、オートスケーリングやロードバランシングを活用することで、コストや管理負荷を抑えながら高い可用性を実現することができます。
